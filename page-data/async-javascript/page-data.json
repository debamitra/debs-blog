{"componentChunkName":"component---src-templates-blog-post-js","path":"/async-javascript/","result":{"data":{"site":{"siteMetadata":{"title":"Deb's Blog"}},"markdownRemark":{"id":"a306ddf6-ddd6-5acd-bc94-8835809cb975","excerpt":"Stop waiting, start doing!\n-Unknown Javascript is inherently synchronous, i.e. it runs only one line of code at a time and in a sequential manner. This means if…","html":"<blockquote>\n<p>Stop waiting, start doing!\n-Unknown</p>\n</blockquote>\n<p>Javascript is inherently synchronous, i.e. it runs only one line of code at a time and in a sequential manner. This means if a task has a long wait-time, e.g waiting for a network call to return a response, it can block the whole program for a while. Also while waiting, no other task can run, which is very inefficient.</p>\n<p>Asynchronicity is when multiple tasks can be dome simulteneously, for instance, while the the program waits for the response of a network call, it can do some other task like display some graphics or compute some numbers or something else. This is made possible through <strong>asynchronous programming</strong>.</p>\n<p>One of the ways to achieve this is via <strong>Callbacks</strong>. Functions that can take a while is passed an extra argument, a callback function. Once this slow function is called it starts its task and when it finishes, the callback function is called inside it.</p>\n<h3>Callbacks</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/debs-blog/static/254d01ddffe14a50b1591b1d5cb1081c/5afe2/callback1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHtvKLEA//EABoQAQACAwEAAAAAAAAAAAAAAAECEQAQEiH/2gAIAQEAAQUCZYOonjdR6D//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEAAwAAAAAAAAAAAAAAAAAAICEx/9oACAEBAAY/AoYp/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAIRBBMVGB/9oACAEBAAE/IUcQhOAotalgeFEISu3P/9oADAMBAAIAAwAAABDDz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAAICAgMAAAAAAAAAAAAAAAERACEQMUFRcf/aAAgBAQABPxBzQjucaXmGsiAwoLgtgAI2JywQUqzn/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Callback\"\n        title=\"Callback\"\n        src=\"/debs-blog/static/254d01ddffe14a50b1591b1d5cb1081c/1c72d/callback1.jpg\"\n        srcset=\"/debs-blog/static/254d01ddffe14a50b1591b1d5cb1081c/a80bd/callback1.jpg 148w,\n/debs-blog/static/254d01ddffe14a50b1591b1d5cb1081c/1c91a/callback1.jpg 295w,\n/debs-blog/static/254d01ddffe14a50b1591b1d5cb1081c/1c72d/callback1.jpg 590w,\n/debs-blog/static/254d01ddffe14a50b1591b1d5cb1081c/a8a14/callback1.jpg 885w,\n/debs-blog/static/254d01ddffe14a50b1591b1d5cb1081c/fbd2c/callback1.jpg 1180w,\n/debs-blog/static/254d01ddffe14a50b1591b1d5cb1081c/5afe2/callback1.jpg 1730w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"blackboard\" >\n          <code slot=\"code\">function doHomework( questions, chocolate, eatChocolate ) {\n //do homework stuff\n .\n .\n eatChocolate(chocolate); \n}\ndoHomework(questions, chocolate, eatChocolate);</code>\n        </deckgo-highlight-code>\n<h3>Problem with Callbacks? - Callback Hell</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/debs-blog/static/3220cd90c5f9a497f3b46c5d3947924e/44fe8/callback2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.24324324324324%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmmygD/xAAYEAEBAQEBAAAAAAAAAAAAAAABABECEP/aAAgBAQABBQLVtwhnkfP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAICH/2gAIAQEABj8CKv8A/8QAGxAAAgIDAQAAAAAAAAAAAAAAABEBIRAxQXH/2gAIAQEAAT8h2FTN7yRZwiBA+Y//2gAMAwEAAgADAAAAELDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQADAQEAAAAAAAAAAAAAAREAITFRcf/aAAgBAQABPxBHK2BPBm8NoAUFerzFFifcG6JfcZRtU3xwITP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Too many nested Callbacks\"\n        title=\"Too many nested Callbacks\"\n        src=\"/debs-blog/static/3220cd90c5f9a497f3b46c5d3947924e/1c72d/callback2.jpg\"\n        srcset=\"/debs-blog/static/3220cd90c5f9a497f3b46c5d3947924e/a80bd/callback2.jpg 148w,\n/debs-blog/static/3220cd90c5f9a497f3b46c5d3947924e/1c91a/callback2.jpg 295w,\n/debs-blog/static/3220cd90c5f9a497f3b46c5d3947924e/1c72d/callback2.jpg 590w,\n/debs-blog/static/3220cd90c5f9a497f3b46c5d3947924e/a8a14/callback2.jpg 885w,\n/debs-blog/static/3220cd90c5f9a497f3b46c5d3947924e/fbd2c/callback2.jpg 1180w,\n/debs-blog/static/3220cd90c5f9a497f3b46c5d3947924e/44fe8/callback2.jpg 2145w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<deckgo-highlight-code language=\"javascript\"  terminal=\"carbon\" theme=\"blackboard\" >\n          <code slot=\"code\">doHomework(questions, function(){\n\teatChocolate(chocolate, function(){\n\t\twashHands(soap, function(){\n\t\t\tplay();\n\t\t});\n\t});\n});</code>\n        </deckgo-highlight-code>\n<p>Above example has only three nested functions but it can go on and on causing difficult to read code.</p>\n<p>To resolve this problem we have <strong>Promises</strong>.</p>\n<h3>Promise</h3>\n<p>A promise is a simple javascript object with mutable state i.e the value it holds changes. When a promise is first created, its state is <code class=\"language-text\">pending</code> and the value it holds is <em>undefined</em> . Later when the promise resolves to a value or gets rejected and returns, the handler passed to <code class=\"language-text\">.then()</code> gets executed.   </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/debs-blog/static/a8a34f1dd613fa7496f427ec2a402d7b/054c0/promise2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 142.56756756756758%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAgABAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHtnYRRiOYUY//EABsQAAMAAgMAAAAAAAAAAAAAAAABESFBEBIx/9oACAEBAAEFAt2l5gy4Xm1k6o//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ak//xAAbEAADAQADAQAAAAAAAAAAAAAAAREhMUFRcf/aAAgBAQABPyF3NFS3CRxO9kbbPs5ejZcoN2dHb0StH5H/2gAMAwEAAgADAAAAEIDIDP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB0QAQACAgMBAQAAAAAAAAAAAAEAESExQVFxYfH/2gAIAQEAAT8Qzgwq8Gpe2YCcL3iDnMSGuwXdRHOLx8lz9R4F9tahwMunUMGV3NAi1mA9d8wro+k//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Promises, promises\"\n        title=\"Promises, promises\"\n        src=\"/debs-blog/static/a8a34f1dd613fa7496f427ec2a402d7b/1c72d/promise2.jpg\"\n        srcset=\"/debs-blog/static/a8a34f1dd613fa7496f427ec2a402d7b/a80bd/promise2.jpg 148w,\n/debs-blog/static/a8a34f1dd613fa7496f427ec2a402d7b/1c91a/promise2.jpg 295w,\n/debs-blog/static/a8a34f1dd613fa7496f427ec2a402d7b/1c72d/promise2.jpg 590w,\n/debs-blog/static/a8a34f1dd613fa7496f427ec2a402d7b/054c0/promise2.jpg 633w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>On executing, when the interpreter reached this line <code class=\"language-text\">checkForExtraPen().then</code></p>\n<ul>\n<li>it puts the  HANDLER we passed into .then() , in the MICROTASK QUEUE.</li>\n<li>it executes the EXECUTOR FUNCTION [that we passed to new Promise()].</li>\n<li>executor function calls reject() and populates promise object with information passed to the reject call ie. “Oops Sorry!”</li>\n<li>interpreter goes to next like and prints “other work..”</li>\n<li>it then takes out the handler from microtask queue and executes it</li>\n<li>the <code class=\"language-text\">value</code> passed to the handler is information returned from resolve(). In our case it is <em>undefined</em>. We get <code class=\"language-text\">error</code> because our promise was rejected, which is printed out “Oops Sorry!”</li>\n</ul>\n<p>And this concludes our Promise story.</p>","frontmatter":{"title":"The Story of a Rejected Promise (As a Javascript Programmer)","date":"May 20, 2021","description":null,"tags":["javascript","promises","tech"]},"timeToRead":2}},"pageContext":{"slug":"/async-javascript/","previous":{"fields":{"slug":"/go-journey-part1/"},"frontmatter":{"title":"A project-based learning attempt at Go, Part-1","tags":["ramblings","go","golang"]}},"next":null}},"staticQueryHashes":["2841359383","3530506519"]}