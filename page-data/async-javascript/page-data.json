{"componentChunkName":"component---src-templates-blog-post-js","path":"/async-javascript/","result":{"data":{"site":{"siteMetadata":{"title":"Deb's Blog"}},"markdownRemark":{"id":"57e6527b-069f-5294-a34a-ba2fb1de34c6","excerpt":"Stop waiting, start doing! -Unknown Javascript is inherently synchronous, i.e. it runs only one line of code at a time and in a sequential manner. This means if…","html":"<blockquote>\n<p>Stop waiting, start doing!</p>\n</blockquote>\n<blockquote>\n<p>-Unknown</p>\n</blockquote>\n<p>Javascript is inherently synchronous, i.e. it runs only one line of code at a time and in a sequential manner. This means if a task has a long wait-time, e.g making a network call and then waiting for the call to return a response, it can block the whole program for a while. Also while waiting, no other task can run, which is very inefficient.</p>\n<p>Asynchronicity is when multiple tasks can be done simulteneously, for instance, while the the program waits for the response of a network call, it can do some other task like display some graphics or compute some numbers or something else. This is made possible through <strong>asynchronous programming</strong>.</p>\n<p>One of the ways to achieve this is via <strong>Callbacks</strong>. A function with a slow task, is passed an extra argument, a callback function. Once this slow function is called it starts its task and when it finishes, the callback function is called inside it.</p>\n<h3>Callbacks</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/254d01ddffe14a50b1591b1d5cb1081c/5afe2/callback1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHtvKLEA//EABoQAQACAwEAAAAAAAAAAAAAAAECEQAQEiH/2gAIAQEAAQUCZYOonjdR6D//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEAAwAAAAAAAAAAAAAAAAAAICEx/9oACAEBAAY/AoYp/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAITFBEFGB/9oACAEBAAE/IUYxCE8BRa1LA8KIQldz/9oADAMBAAIAAwAAABDjz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAAICAgMAAAAAAAAAAAAAAAERACEQUTFBcf/aAAgBAQABPxBywO060vMNbAMKBGCZwIjQ5wCUqW5//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Callback\"\n        title=\"\"\n        src=\"/static/254d01ddffe14a50b1591b1d5cb1081c/1c72d/callback1.jpg\"\n        srcset=\"/static/254d01ddffe14a50b1591b1d5cb1081c/a80bd/callback1.jpg 148w,\n/static/254d01ddffe14a50b1591b1d5cb1081c/1c91a/callback1.jpg 295w,\n/static/254d01ddffe14a50b1591b1d5cb1081c/1c72d/callback1.jpg 590w,\n/static/254d01ddffe14a50b1591b1d5cb1081c/a8a14/callback1.jpg 885w,\n/static/254d01ddffe14a50b1591b1d5cb1081c/fbd2c/callback1.jpg 1180w,\n/static/254d01ddffe14a50b1591b1d5cb1081c/5afe2/callback1.jpg 1730w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<deckgo-highlight-code language=\"javascript\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">function doHomework( questions, chocolate, eatChocolate ) {\r\n //do homework stuff\r\n .\r\n .\r\n eatChocolate(chocolate); \r\n}\r\ndoHomework(questions, chocolate, eatChocolate);</code>\n        </deckgo-highlight-code>\n<h3>Problem with Callbacks? - Callback Hell</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3220cd90c5f9a497f3b46c5d3947924e/44fe8/callback2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.24324324324324%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdmmygD/xAAXEAEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAEBAAEFAqus4OQef//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwIq/wD/xAAbEAACAgMBAAAAAAAAAAAAAAAAASFBEBExkf/aAAgBAQABPyHorZH5FJQkNE3WP//aAAwDAQACAAMAAAAQs8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEBAAMBAQAAAAAAAAAAAAABEQAhMVFx/9oACAEBAAE/EGsjCCeGt4RqgoK9XmKLE+4FhC+4KNVTfHOGf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Too many nested Callbacks\"\n        title=\"\"\n        src=\"/static/3220cd90c5f9a497f3b46c5d3947924e/1c72d/callback2.jpg\"\n        srcset=\"/static/3220cd90c5f9a497f3b46c5d3947924e/a80bd/callback2.jpg 148w,\n/static/3220cd90c5f9a497f3b46c5d3947924e/1c91a/callback2.jpg 295w,\n/static/3220cd90c5f9a497f3b46c5d3947924e/1c72d/callback2.jpg 590w,\n/static/3220cd90c5f9a497f3b46c5d3947924e/a8a14/callback2.jpg 885w,\n/static/3220cd90c5f9a497f3b46c5d3947924e/fbd2c/callback2.jpg 1180w,\n/static/3220cd90c5f9a497f3b46c5d3947924e/44fe8/callback2.jpg 2145w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<deckgo-highlight-code language=\"javascript\" terminal=\"carbon\" theme=\"blackboard\"  >\n          <code slot=\"code\">doHomework(questions, function(){\r\n\teatChocolate(chocolate, function(){\r\n\t\twashHands(soap, function(){\r\n\t\t\tplay();\r\n\t\t});\r\n\t});\r\n});</code>\n        </deckgo-highlight-code>\n<p>Above example has only three nested functions but the indented nesting can go on and on resulting in difficult to read code.</p>\n<p>To resolve this problem we have <strong>Promises</strong>.</p>\n<h3>Promise</h3>\n<p>A promise is a simple javascript object with mutable state i.e the value it holds changes. When a promise is first created, its state is <code class=\"language-text\">pending</code> and the value it holds is <em>undefined</em> . Later when the promise resolves to a value or gets rejected and returns, the handler passed to <code class=\"language-text\">.then()</code> gets executed with this resolved value or rejected error as the case may be.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a8a34f1dd613fa7496f427ec2a402d7b/054c0/promise2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 142.56756756756758%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe3ncKgZUqD/xAAaEAACAwEBAAAAAAAAAAAAAAAAARESQRAh/9oACAEBAAEFAtkntRjEzV6VR//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABUQAQEAAAAAAAAAAAAAAAAAACBR/9oACAEBAAY/AnD/AP/EABwQAAMAAgMBAAAAAAAAAAAAAAABETFBIVFhcf/aAAgBAQABPyF2+fRU7rRI4udkbb9Poy7GaWQiZpkJQ+pH/9oADAMBAAIAAwAAABAjyjz/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAcEAEBAAMAAwEAAAAAAAAAAAABEQAhMUFhcVH/2gAIAQEAAT8Q1tQNg56y2loHwfdMGPOJOx6Lc3+nFxjHA3G+WYNFB0MmAN+2FWKVcKD+XLe30uf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Promises, promises\"\n        title=\"\"\n        src=\"/static/a8a34f1dd613fa7496f427ec2a402d7b/1c72d/promise2.jpg\"\n        srcset=\"/static/a8a34f1dd613fa7496f427ec2a402d7b/a80bd/promise2.jpg 148w,\n/static/a8a34f1dd613fa7496f427ec2a402d7b/1c91a/promise2.jpg 295w,\n/static/a8a34f1dd613fa7496f427ec2a402d7b/1c72d/promise2.jpg 590w,\n/static/a8a34f1dd613fa7496f427ec2a402d7b/054c0/promise2.jpg 633w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>On executing above program, when the interpreter reaches this line <code class=\"language-text\">checkForExtraPen().then</code> it executes the following steps -</p>\n<ul>\n<li>\n<p>it puts the  HANDLER we passed into .then() , in the MICROTASK QUEUE.</p>\n</li>\n<li>\n<p>it executes the EXECUTOR FUNCTION [that we passed to new Promise()].</p>\n</li>\n<li>\n<p>executor function then calls reject() and populates promise object with information passed to the reject call ie. “Oops Sorry!”</p>\n</li>\n<li>\n<p>interpreter goes to next line and prints “..other work”</p>\n</li>\n<li>\n<p>it then takes out the HANDLER from microtask queue and executes it</p>\n</li>\n<li>\n<p>the <code class=\"language-text\">value</code> passed to the handler is information returned from resolve(). In our case it is <em>undefined</em>. We get <code class=\"language-text\">error</code> because our promise was rejected, which is printed out “Oops Sorry!”</p>\n</li>\n</ul>\n<p>And this concludes our Promise story.</p>\n<hr>\n<p>I can be reached at <a href=\"mailto:debamitra.mukherjee@gmail.com\">debamitra.mukherjee@gmail.com</a> , or connect with me on <a href=\"https://twitter.com/debamitra_\">twitter</a></p>\n<p>Thanks for reading, hope you enjoyed it.</p>","frontmatter":{"title":"The Story of a Rejected Promise (As a Javascript Programmer)","date":"May 20, 2021","description":"Promises, promises everywhere, not even one resolved!","tags":["javascript","promises","tech"]},"timeToRead":2}},"pageContext":{"slug":"/async-javascript/","previous":null,"next":null}},"staticQueryHashes":["2841359383","3584003949"],"slicesMap":{}}